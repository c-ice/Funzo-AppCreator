<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <title></title>
        <link href="css/bootstrap.css" rel="stylesheet">
        <link href="css/main.css" rel="stylesheet">
        <script src="js/libs/jquery-1.9.0/jquery.min.js"></script>
        <script src="js/libs/bootstrap.js"></script>
    </head>
    <body class="container-fluid">
        <div class="navbar navbar-inverse navbar-fixed-top">
            <div class="navbar-inner">
                <div class="container" style="width: auto;margin-left: 50px;">
                    <a class="brand" href="#">AppCreator</a>
                    <ul class="nav" role="navigation">
                        <li class="dropdown">
                            <a id="drop1" href="#" role="button" class="dropdown-toggle" data-toggle="dropdown">File <b class="caret"></b></a>
                            <ul class="dropdown-menu" role="menu" aria-labelledby="drop1">
                                <li role="presentation"><a role="menuitem" tabindex="-1" href="http://google.com">Action</a></li>
                                <li role="presentation"><a role="menuitem" tabindex="-1" href="#anotherAction">Another action</a></li>
                                <li role="presentation"><a role="menuitem" tabindex="-1" href="#">Something else here</a></li>
                                <li role="presentation" class="divider"></li>
                                <li role="presentation"><a role="menuitem" tabindex="-1" href="#">Separated link</a></li>
                            </ul>
                        </li>
                        <li class="dropdown">
                            <a id="drop1" href="#" role="button" class="dropdown-toggle" data-toggle="dropdown">Edit <b class="caret"></b></a>
                            <ul class="dropdown-menu" role="menu" aria-labelledby="drop1">
                                <li role="presentation"><a role="menuitem" tabindex="-1" href="http://google.com">Action</a></li>
                                <li role="presentation"><a role="menuitem" tabindex="-1" href="#anotherAction">Another action</a></li>
                                <li role="presentation"><a role="menuitem" tabindex="-1" href="#">Something else here</a></li>
                                <li role="presentation" class="divider"></li>
                                <li role="presentation"><a role="menuitem" tabindex="-1" href="#">Separated link</a></li>
                            </ul>
                        </li>
                        <li class="dropdown">
                            <a href="#" id="drop2" role="button" class="dropdown-toggle" data-toggle="dropdown">View <b class="caret"></b></a>
                            <ul class="dropdown-menu" role="menu" aria-labelledby="drop2">
                                <li role="presentation"><a role="menuitem" tabindex="-1" href="#">Action</a></li>
                                <li role="presentation"><a role="menuitem" tabindex="-1" href="#">Another action</a></li>
                                <li role="presentation"><a role="menuitem" tabindex="-1" href="#">Something else here</a></li>
                                <li role="presentation" class="divider"></li>
                                <li role="presentation"><a role="menuitem" tabindex="-1" href="#">Separated link</a></li>
                            </ul>
                        </li>
                        <li>
                            <a role="button" href="#">About</a>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
        <div id="toolbox" class="btn-toolbar" >
            <div class="btn-group" data-toggle="buttons-radio">
                <button class="btn active" data-toggle="tab" data-tool="1"><i class="icon-move"></i>Mouse</button>
                <button class="btn" data-toggle="tab" data-tool="2">Association</button>
                <button class="btn" data-toggle="tab" data-tool="3"><i class="icon-tasks"></i>Element</button>
                <button class="btn" data-toggle="tab" data-tool="4">Attribute</button>
            </div>
            <script>
                $('.btn-toolbar button').click(function(e) {
                    instance.setSelectedTool($(this).data('tool'));
                });
            </script>
        </div>
        <div class="row-fluid">
            <div class="span10">
                <div class="tabbable tabs-left">
                    <ul class="nav nav-tabs" style="margin-right: -1px;">
                        <li class="active"><a href="#modelContainer" data-toggle="tab">Model</a></li>
                        <li><a href="#lB" data-toggle="tab">View</a></li>
                        <li><a href="#lC" data-toggle="tab">Controller</a></li>
                    </ul>
                    <div class="tab-content">
                        <div class="tab-pane active" id="modelContainer">
                            <div id="container"></div>   
                        </div>
                        <div class="tab-pane" id="lB">
                            <p>Howdy, I'm in Section B.</p>
                        </div>
                        <div class="tab-pane" id="lC">
                            <p>What up girl, this is Section C.</p>
                        </div>
                    </div>
                </div>
            </div>
            <div class="span2">
                <ul class="nav nav-list affix span2">
                    <li class="nav-header">Properties</li>
                    <li class="active"><a href="#">Type</a></li>
                    <li><a href="#">Name</a></li>
                    <li class="divider"></li>
                    <li><a href="#">Next Group</a></li>
                </ul>
            </div>
            <script src="KineticJS/dist/kinetic-vcurrent.js" ></script>        
            <script src="js/AppCreator.js"></script>
            <script src="js/utils/GraphicTools.js"></script>
            <script src="js/utils/Images.js"></script>
            <script src="js/shapes/Arrow.js"></script>
            <script src="js/Element.js"></script>
            <script src="js/Attribute.js"></script>
            <script src="js/ResizePoint.js"></script>
            <script src="js/MovePoint.js"></script>
            <script src="js/Association.js"></script>
            <script>
                var instance = null;
                var A, B;
                $(document).ready(function() {
                    instance = new AppCreator.Root();

                    A = new AppCreator.Element({
                        x: 100,
                        y: 100,
                        width: 50,
                        height: 200,
                        draggable: true
                    });
                    B = new AppCreator.Element({
                        x: 350,
                        y: 100,
                        width: 50,
                        height: 200,
                        draggable: true
                    });

                    instance.getLayer().add(A);

                    A.addAttribute({name: "testovacia", type: 'String'});
                    A.addAttribute({name: "testovacia1", type: 'String'});
                    A.addAttribute({name: "testovacia2", type: 'String'});

                    instance.getLayer().add(B);

                    B.addAttribute({name: "Collection", type: 'String'});
                    B.addAttribute({name: "Transaction", type: 'String'});

                    var assoc = new AppCreator.Association({target: B,
                        source: A});

                    instance.getLinesLayer().add(assoc);
                    instance.getLinesLayer().draw();
                    // GRID - snippet 
                    // http://stackoverflow.com/questions/9494292/jquery-drag-and-drop-and-snap-to-grid-in-kineticjs
                    //            box.on("dragend", function(){
                    //                snaptogrid(box);
                    //            });
                    //            function snaptogrid(YourObject){
                    //                YourObject.x = Math.floor(YourObject.x/100)*100 +50;
                    //                YourObject.y = Math.floor(YourObject.y/100)*100 +50;
                    //            }
                });
            </script>
        </div>
    </body>
</html>
