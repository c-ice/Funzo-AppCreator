<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <title></title>
        <link href="css/bootstrap.css" rel="stylesheet">
        <link href="css/main.css" rel="stylesheet">
        <script src="js/libs/jquery-1.9.0/jquery.min.js"></script>
        <script src="js/libs/bootstrap.js"></script>
    </head>
    <body class="container-fluid">
        <div id="toolbox" class="navbar">
            <div class="navbar-inner">
                <ul class="nav">
                    <li class="active"><a data-toggle="tab" data-tool="1" href="#">Mouse</a></li>
                    <li><a data-toggle="tab" data-tool="3" href="#">Element</a></li>
                    <li><a data-toggle="tab" href="#">Attribute</a></li>
                    <li><a data-toggle="tab" data-tool="2" href="#">Association</a></li>
                </ul>
                <script>
                    $('.nav a').click(function(e) {
                        e.preventDefault();
                        AppCreator.selectedTool = $(this).data('tool');
                    });
                </script>
            </div>
        </div>
        <div class="row-fluid">
            <div id="container" class="span10"></div>   
            <div class="span2">
                <ul class="nav nav-list">
                    <li class="nav-header">Properties</li>
                    <li class="active"><a href="#">Type</a></li>
                    <li><a href="#">Name</a></li>
                    <li class="divider"></li>
                    <li><a href="#">Next Group</a></li>
                </ul>
            </div>
            <script src="KineticJS/dist/kinetic-vcurrent.js" ></script>        
            <script src="js/AppCreator.js"></script>
            <script src="js/utils/GraphicTools.js"></script>
            <script src="js/shapes/Arrow.js"></script>
            <script src="js/Element.js"></script>
            <script src="js/Attribute.js"></script>
            <script src="js/ResizePoint.js"></script>
            <script src="js/MovePoint.js"></script>
            <script src="js/Association.js"></script>
            <script>
                    var instance = null;
                    var A, B;
                    $(document).ready(function() {
                        instance = new AppCreator.Root();

                        A = new AppCreator.Element({
                            x: 100,
                            y: 100,
                            width: 50,
                            height: 200,
                            draggable: true
                        });
                        B = new AppCreator.Element({
                            x: 350,
                            y: 100,
                            width: 50,
                            height: 200,
                            draggable: true
                        });

                        instance.getLayer().add(A);

                        A.addAttribute({name: "testovacia", type: 'String'});
                        A.addAttribute({name: "testovacia1", type: 'String'});
                        A.addAttribute({name: "testovacia2", type: 'String'});

                        instance.getLayer().add(B);

                        B.addAttribute({name: "Collection", type: 'String'});
                        B.addAttribute({name: "Transaction", type: 'String'});

                        var assoc = new AppCreator.Association({target: B,
                            source: A,
                            stroke: 'black',
                            strokeWidth: 1});

                        instance.getLinesLayer().add(assoc);
                        instance.getLinesLayer().draw();
                        // GRID - snippet 
                        // http://stackoverflow.com/questions/9494292/jquery-drag-and-drop-and-snap-to-grid-in-kineticjs
                        //            box.on("dragend", function(){
                        //                snaptogrid(box);
                        //            });
                        //            function snaptogrid(YourObject){
                        //                YourObject.x = Math.floor(YourObject.x/100)*100 +50;
                        //                YourObject.y = Math.floor(YourObject.y/100)*100 +50;
                        //            }
                    });
            </script>
        </div>
    </body>
</html>
